<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/reskript/blog/rss.xml" title="reSKRipt Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/reskript/blog/atom.xml" title="reSKRipt Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="reSKRipt" href="/reskript/opensearch.xml"><title data-react-helmet="true">One post tagged with &quot;version release&quot; | reSKRipt</title><meta data-react-helmet="true" property="og:title" content="One post tagged with &quot;version release&quot; | reSKRipt"><meta data-react-helmet="true" property="og:url" content="https://ecomfe.github.io/reskript/blog/tags/version-release"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-react-helmet="true" rel="shortcut icon" href="/reskript/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ecomfe.github.io/reskript/blog/tags/version-release"><link data-react-helmet="true" rel="alternate" href="https://ecomfe.github.io/reskript/blog/tags/version-release" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ecomfe.github.io/reskript/blog/tags/version-release" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/reskript/assets/css/styles.7a0f85c1.css">
<link rel="preload" href="/reskript/assets/js/runtime~main.486556d4.js" as="script">
<link rel="preload" href="/reskript/assets/js/main.59db0e6d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/reskript/"><img src="/reskript/images/logo.svg" alt="reSKRipt" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/reskript/images/logo.svg" alt="reSKRipt" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a class="navbar__item navbar__link" href="/reskript/docs/getting-started">文档</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/reskript/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ecomfe/reskript" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-tags-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/reskript/blog/v2-long-awaited">V2 - 望之如梅</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/reskript/blog/enable-deprecation-flag">用全局环境变量做好升级2.0的准备</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/reskript/blog/use-reflect-metadata">支持Reflect Metadata</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/reskript/blog/play-with-router">用skr play调试需要路由的组件</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/reskript/blog/svg-import-change">导入SVG文件规则调整</a></li></ul></nav></aside><main class="col col--7"><header class="margin-bottom--xl"><h1>One post tagged with &quot;version release&quot;</h1><a href="/reskript/blog/tags">View All Tags</a></header><article class="margin-bottom--xl"><header><h2 class="blogPostTitle_GeHD"><a href="/reskript/blog/v2-long-awaited">V2 - 望之如梅</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-08-26T00:00:00.000Z">August 26, 2021</time> · One min read</div><div class="avatar margin-vert--md"><a href="https://github.com/otakustay" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://www.gravatar.com/avatar/d7479a703555cc76b277040e5be9b8ca" alt="otakustay"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/otakustay" target="_blank" rel="noopener noreferrer">otakustay</a></div><small class="avatar__subtitle"></small></div></div></header><div class="markdown"><p>很高兴在这一刻向大家介绍<code>reSKRipt</code> V2版本的正式发布。</p><p>如果你想快速了解如何升级到V2，那么可以参考<a href="https://ecomfe.github.io/reskript/docs/migration/v2" target="_blank" rel="noopener noreferrer">V2迁移手册</a>，此文更多地用于介绍我们的心路历程和V2的版本规划。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="唯心---关于代号"></a>唯心 - 关于代号<a class="hash-link" href="#唯心---关于代号" title="Direct link to heading">#</a></h2><p><code>reSKRipt</code>在GitHub上的第一个提交始于2021年1月24日，与今天（2021年8月26日）几乎正好7个月。为了纪念这个值得庆贺的日子，也为了更好地鼓舞我们自己向前迈进，我们决定给<code>reSKRipt</code>的每个大版本一个贴心的称号。我们的历史版本也将按相应的代码命名并永久保存。</p><p>作为一个已经结束使命的版本，我们也为V1版本起了一个代号：</p><blockquote><p>V1 - Preserved Heart - 坚韧之心</p></blockquote><p>在开源在GitHub之前，作为一个团队内部的工具，<code>reSKRipt</code>早已在内部的源码平台上孵化了3年之久，有过近百个版本。把一个团队高度一致的技术栈下诞生的工具开放出来，甚至推进成为一个顶级互联网公司的代码库初始化工具，是一件需要勇气和坚持的事情。</p><p>在这不长不短的3年时间里，我们经历了很多的升级、迁移、需求、质疑，最终为工具的统一与改进埋下了一株深根，即使是自夸，我们也相信这份坚韧的心，值得保留在代码的历史之中。</p><p>另一方面，V1作为初始之作，固定了整个工具的流程、逻辑、架构，从发展的角度看，亦不谓于“核心”的定位。在我们进一步选择更现代化的工具如Vite、ESBuild、SWC之前，V1留下的财富将会贯穿于<code>reSKRipt</code>的生命。</p><p>因此，V1谓之于“坚韧”，谓之于“心”。而V2版本，也被赋予了相应的代号：</p><blockquote><p>V2 - Long Awaited - 望之如梅</p></blockquote><p>与<a href="https://github.com/ecomfe/reskript/issues/39" target="_blank" rel="noopener noreferrer">V2相关的第一个议题</a>始于2021年4月，距V1的发布仅3月之久。当然很遗憾地ESM化并没有进入到V2版本中。自那时开始，我们就一直在等待一个成熟、合适地机会，推动V2版本的诞生与发布，其计划的时间线之长久，称为“望梅”当之无愧。</p><p>“望之如梅”一词取自于“望梅止渴”，意在表达我们长时间对它的期待，以及身体力行地不断演进向其靠拢。历经4个月的时间，终于在<code>webpack-dev-server</code>发布<code>4.0.0</code>之际，让其落于地面，与所有用户相见。</p><p>我们也相信，在V2版本中带来的变化，同样是所有用户所期盼、所需要的，正如干渴之时的一棵梅果，虽不及最先进的那些工具一样饮之如怡，却也足够让开发与构建更为舒心。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="契机---社区迭代"></a>契机 - 社区迭代<a class="hash-link" href="#契机---社区迭代" title="Direct link to heading">#</a></h2><p>我们在生产工具的时候，一向尊重大版本的重要性。如果无限制地追求自身的整洁而发布大版本来淘汰一些瑕疵，定会失信于用户。因此我们对于大版本的规划，往往会与社区相应工具的版本对齐，并以此为契机抖落原本加于自身的包袱，也同时给用户提供一个低成本的升级路径。</p><p>V1版本的契机无疑是Webpack 5.0的发布，基于Webpack新增的持久缓存能力，我们将编译时间普遍缩短了2/3以上，10万行规模的项目也可以轻松在3分钟内完成整个构建过程。</p><p>而V2的发布，依然立足于社区之上，引入了非常关键的一个更新：<code>webpack-dev-server</code>的4.0版本。你可以<a href="https://github.com/webpack/webpack-dev-server/blob/master/migration-v4.md" target="_blank" rel="noopener noreferrer">在这里</a>看到官方发布的4.0的升级手册。当然大部分的变化已经被<code>reSKRipt</code>内部封装屏蔽，绝大部分用户无需关心它的破坏性变化。我们需要了解的是，<code>webpack-dev-server</code> 4.0版本为我们带来了更稳定的热更新能力、更合理的日志架构。</p><p>当然更新一个社区的核心工具并不是一件容易的事，有不少的第三方插件可能因此而无法工作。为此，我们投入了大量的工作，例如重新定制并实现了<code>skr dev</code>的进度条功能，以此致力于提供一致、优秀的开发体验。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="轻装---清理债务"></a>轻装 - 清理债务<a class="hash-link" href="#轻装---清理债务" title="Direct link to heading">#</a></h2><p>是的，每一个大版本都必然会产生一系列的破坏性变更，同时也是一次清理自身的债务与负担的机会。</p><p>我们在V2版本之初，就大幅度调整了项目的构建和配置，这是“内功”的修为。相比于V1，我们全盘TypeScript化了测试用例、引入了一个用于集成测试的五脏俱全的“微型”TodoMVC项目，大面积地清理了历史的代码。</p><p>同样地，我们也借此废弃了一部分的配置和参数，并以功能更强、更加正交的能力给予替代，你依然可以通过<a href="https://ecomfe.github.io/reskript/docs/migration/v2" target="_blank" rel="noopener noreferrer">V2迁移手册</a>查阅所有的这些变化。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="革命---全面异步"></a>革命 - 全面异步<a class="hash-link" href="#革命---全面异步" title="Direct link to heading">#</a></h2><p>如果说参数、配置的变更是我们在工具层面上的进化，那么V2真正最重要的破坏性变更，则是对外暴露的API的全面异步化。</p><p>在V1版本时，我们希望<code>reSKRipt</code>能全面地兼容于社区的各类构建工具链，比如<code>electron-forge</code>、<code>electron-webpack</code>等，因此诸如<code>@reskript/config-webpack</code>暴露的<code>createWebpackConfig</code>等API都是同步的，在那个时代，我们的心态是被动的，既然社区有工具只能使用同步的API来对接，我们就提供同步的API。</p><p>但最终我们发现，如果禁锢自己永远无法达到自身期待的那个理想之乡，因此我们决定投身于社区的建设。如果社区的主流工具无法对接异步的API，我们就去贡献相关的逻辑，让整个社区也能受益于异步的能力。我们已经<a href="https://github.com/electron-userland/electron-forge/issues/2461" target="_blank" rel="noopener noreferrer">在<code>electron-forge</code>提交了相关议题</a>作为我们迈出的第一步。</p><p>在全面的异步化之后，我们得到了大量的收益，几乎所有的文件检查、读取都可以并行化。例如计算Webpack缓存标识符的逻辑，需要读取5+个文件并合并计算哈希，在异步化之后，我们可以并行地处理这些文件，来获得不小的性能优势。</p><p>异步化也同样为我们打下了开拓未来的基石，我们相信随着工程的思想发展，构建这个环节会有越来越多的机器对源码的解读，这一切都会在未来产生大量的源代码的读取、解析、汇聚，而异步解除了我们串行IO的性能的担忧，便于在未来更专注地投入工具能力的升级。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="精耕---事关体验"></a>精耕 - 事关体验<a class="hash-link" href="#精耕---事关体验" title="Direct link to heading">#</a></h2><p>作为一个开发者的工具，我们坚持开发者体验是评价它的最重要的指标之一。因此我们在V2的开发中也加入了大量开发者体验上的提升。</p><p>首先，我们完全重写了子命令的管理与调用逻辑，现在你可以不安装任何的<code>@reskript/cli-*</code>子命令包，单纯地通过<code>skr --help</code>看到所有可用的子命令。</p><p>我们也进一步支持了<strong>子命令的自动安装</strong>，假设你没有安装<code>@reskript/cli-dev</code>，在执行<code>skr dev</code>时经过友好地询问，我们会自动为你装上相应的包，并顺利地将命令运行起来。</p><p>我们同样追求更好地适配社区的工具，<code>skr test</code>从V2版本开始可以将你的参数全部传递到<code>jest</code>之上，以发挥出<code>jest</code>完整的能力。</p><p>我们还从V2版本开始支持了<a href="https://tailwindcss.com/" target="_blank" rel="noopener noreferrer">TailwindCSS</a>，你可以通过<a href="https://ecomfe.github.io/reskript/docs/settings/build#%E7%89%B9%E6%AE%8A%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E7%9A%84%E4%BC%98%E5%8C%96" target="_blank" rel="noopener noreferrer">简单的配置</a>开启使用<code>tailwind</code>进行样式开发。</p><p>我们用<a href="https://github.com/arcanis/clipanion" target="_blank" rel="noopener noreferrer">clipanion</a>作为新的命令行编排框架，并将在未来不久带来命令的自动补全等实用能力，皆在提供最佳的使用体验。</p><p>我们也同样关心你的升级体验，现在你可以通过在项目根目录下执行<code>npx @reskript/doctor migrate-v2</code>来进行自动化地检测，尽可能地发现需要修改的内容。同时你也可以暂时停留在V1版本，通过<code>export SKR_FLAGS=deprecation-error</code>来发现在V2中会被废弃的参数的使用。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="结语---始终相伴"></a>结语 - 始终相伴<a class="hash-link" href="#结语---始终相伴" title="Direct link to heading">#</a></h2><p>在你看到这篇博客之际，V2版本已经经过了5+个beta版本，在内部10+个产品上完成了验证，这些产品包括了普通项目、monorepo仓库、微前端架构等等复杂的场景，我们有信心为大家交付一个高质量的初始版本。</p><p>我们欢迎并推荐你升级到V2版本，如果在此期间遇到任何的困难，欢迎<a href="https://github.com/ecomfe/reskript/issues/new" target="_blank" rel="noopener noreferrer">通过Github向我们咨询</a>。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><a class="margin-horiz--sm" href="/reskript/blog/tags/version-release">version release</a></div><div class="col text--right"><a aria-label="Read more about V2 - 望之如梅" href="/reskript/blog/v2-long-awaited"><b>Read More</b></a></div></footer></article></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/reskript/assets/js/runtime~main.486556d4.js"></script>
<script src="/reskript/assets/js/main.59db0e6d.js"></script>
</body>
</html>