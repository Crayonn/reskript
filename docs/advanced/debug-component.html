<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/reskript/blog/rss.xml" title="reSKRipt Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/reskript/blog/atom.xml" title="reSKRipt Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="reSKRipt" href="/reskript/opensearch.xml"><title data-react-helmet="true">调试单个组件 | reSKRipt</title><meta data-react-helmet="true" property="og:url" content="https://ecomfe.github.io/reskript/docs/advanced/debug-component"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="调试单个组件 | reSKRipt"><meta data-react-helmet="true" name="description" content="在一个比较复杂的应用的开发中，有时候我们希望针对其中一个组件做些调试，但写一个干净的页面保留一个组件比较麻烦，这时我们可以使用skr play功能来将单个组件抽取出来并打开一个可互动的调试界面。"><meta data-react-helmet="true" property="og:description" content="在一个比较复杂的应用的开发中，有时候我们希望针对其中一个组件做些调试，但写一个干净的页面保留一个组件比较麻烦，这时我们可以使用skr play功能来将单个组件抽取出来并打开一个可互动的调试界面。"><link data-react-helmet="true" rel="shortcut icon" href="/reskript/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ecomfe.github.io/reskript/docs/advanced/debug-component"><link data-react-helmet="true" rel="alternate" href="https://ecomfe.github.io/reskript/docs/advanced/debug-component" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ecomfe.github.io/reskript/docs/advanced/debug-component" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/reskript/assets/css/styles.7a0f85c1.css">
<link rel="preload" href="/reskript/assets/js/runtime~main.169b8fe5.js" as="script">
<link rel="preload" href="/reskript/assets/js/main.15d86ffe.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/reskript/"><img src="/reskript/images/logo.svg" alt="reSKRipt" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/reskript/images/logo.svg" alt="reSKRipt" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/reskript/docs/getting-started">文档</a><a class="navbar__item navbar__link" href="/reskript/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ecomfe/reskript" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/reskript/docs/getting-started">开始使用</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">应用开发</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">配置</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">命令行</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">高阶应用</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/reskript/docs/advanced/custom-env">管理自定义环境变量</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/reskript/docs/advanced/lint-rules">额外的编码规范</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/reskript/docs/advanced/service-worker">构建Service Worker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/reskript/docs/advanced/config-insiders">配置解密</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/reskript/docs/advanced/multiple-entry">多应用入口</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/reskript/docs/advanced/browsers-list">指定浏览器兼容性</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/reskript/docs/advanced/web-worker">使用Web Worker</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/reskript/docs/advanced/debug-component">调试单个组件</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">插件</a></li><li class="menu__list-item"><a class="menu__link" href="/reskript/docs/faq">FAQ</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">调试单个组件</h1></header><p>在一个比较复杂的应用的开发中，有时候我们希望针对其中一个组件做些调试，但写一个干净的页面保留一个组件比较麻烦，这时我们可以使用<code>skr play</code>功能来将单个组件抽取出来并打开一个可互动的调试界面。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="使用方法"></a>使用方法<a class="hash-link" href="#使用方法" title="Direct link to heading">#</a></h2><p>首先安装上<code>@reskript/cli-play</code>：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> --save-dev @reskript/cli-play`</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>你需要<code>react</code>和<code>react-dom</code>才能够运行，当然相信你都有需要调试的组件了，这些最基本的依赖肯定是安装上了的。</p><p>指定你要调试的组件的文件，比如我们想调试一个简单的<code>src/components/Loading</code>组件，便可以这样：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">skr play src/components/Loading/index.tsx</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>你可以参阅<a href="/reskript/docs/cli/play">命令行 - 调试单个组件</a>了解命令行上可用的参数，或参考<a href="/reskript/docs/settings/play">配置 - 单组件调试配置</a>了解在<code>reskript.config.js</code>中用作单组件调试的各项配置。</p><p>等待一段时间，命令行中会显示出调试服务器的信息：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> DONE  Compiled successfully in 1278ms</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> I  Your application is running here: http://localhost:9999/</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>调试服务器会固定在<code>9999</code>端口打开，在浏览器中打开<code>http://localhost:9999</code>就能看到互动式的调试页面：</p><p><img src="/reskript/assets/images/playground-55077c90e798097c77a7b4e2284f23a6.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="调整组件"></a>调整组件<a class="hash-link" href="#调整组件" title="Direct link to heading">#</a></h2><p>你可以在左侧的编辑器中直接使用组件，可以给组件添加一些属性，右侧会展示相应的效果。</p><p>在互动界面上，输入会有500毫秒的防抖效果，所以你在输入完后需要等待一小段时间，才能在右侧看到变化。</p><p>另外，热更新也是默认支持的，你可以修改<code>src/components/Loading/index.tsx</code>文件的内容，浏览器中会自动刷新。</p><p>如果组件需要发请求，那么<code>reskript.config.js</code>中的<code>exports.devServer</code>中代理API相关的配置也会地生效，可以正常地把请求代理给后端服务。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="组件调试配置"></a>组件调试配置<a class="hash-link" href="#组件调试配置" title="Direct link to heading">#</a></h2><p>对于任意一个组件，可以在其文件所在的目录下创建一个<code>__repl__/{file}.play.js</code>的文件，比如这样的目录结构：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/src</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /components</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        /Loading</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            /__repl__</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                index.play.js</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            index.tsx</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>这个文件将用于组件通过<code>skr play</code>调试时的上下文配置。每一个配置文件可以导出<code>wrapper</code>和<code>provides</code>两个变量，以下是一个示例：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> HeadingRow </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@/components/HeadingRow&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> provides </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    HeadingRow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> flexCenterStyle </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    display</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;flex&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    alignItems</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;center&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    justifyContent</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;center&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    flexDirection</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;column&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    gap</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Wrapper</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter">children</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript" style="color:rgb(255, 85, 114)">flexCenterStyle</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">This playground is wrapped </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> a flex centered container</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">p</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">children</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>配合这个配置，打开调试界面并输入一些代码后，你可以看到类似这样的界面：</p><p><img src="/reskript/assets/images/play-conf-1d1633b676c0981edb787e891fab08a2.png"></p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>你也可以<a href="/reskript/docs/settings/play#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE">通过配置文件</a>来提供全局的调试配置。</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="向调试环境提供额外依赖"></a>向调试环境提供额外依赖<a class="hash-link" href="#向调试环境提供额外依赖" title="Direct link to heading">#</a></h3><p>配置文件中的<code>provides</code>是一个对象，这个对象的中的内容均可以通过<code>I.*</code>访问，如上的配置提供了<code>HeadingRow</code>这一组件，则对应图中使用<code>&lt;I.HeadingRow text=&quot;Page Title&quot; /&gt;</code>可以直接使用这个组件。</p><p><code>provides</code>对象可以提供任何内容，包括并不限于项目内的其它模块和组件、第三方的包和函数（如<code>ramda</code>）、硬编码的常量、帮助调试的额外组件等。这些代码会最终通过webpack被编译在调试环境中，与你项目本身的代码无异。</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>不过<code>React</code>这东西并不需要通过<code>provides</code>来注入，在调试环境中默认注入了<code>React</code>这个全局变量，你可以直接使用<code>React.useState</code>、<code>React.createElement</code>等。</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="自定义调试预览的布局"></a>自定义调试预览的布局<a class="hash-link" href="#自定义调试预览的布局" title="Direct link to heading">#</a></h3><p>有些组件会依赖特定的布局，如组件本身带有<code>grid-area</code>样式，必须在一个<code>display: grid</code>的容器内才能正确展示。此时可以通过配置文件中导出<code>Wrapper</code>组件自定义预览的布局。</p><p><code>Wrapper</code>组件仅接受一个<code>children</code>属性，你可以在其外部增加结构。如上面的示例代码会将预览包含在一个居中的容器中，并额外增加一段文本。</p><p>同样地，<code>Wrapper</code>也可以依赖于项目内、第三方的任何可编译内容，只需要在配置文件中写好<code>import</code>引入这些依赖即可。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="管理调试用例"></a>管理调试用例<a class="hash-link" href="#管理调试用例" title="Direct link to heading">#</a></h2><p>在一个严谨的工程项目中，我们会希望对组件的调试、测试过程能被保留下来，用于后续修改代码后的二次验证，从而确保代码本身的高质量。<code>skr play</code>在提供单个组件的调试能力的同时，也提供了一套管理用例的方案，其特点在于：</p><ol><li>通过人类可读的结构管理用例，使用markdown格式。</li><li>将处于调试现场的浏览器页面与用例打通，可实时、零成本地保存调试现场到用例。</li><li>可以将旧的用例填充到调试现场，并在此基础上进行交互验证。</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="了解用例文件"></a>了解用例文件<a class="hash-link" href="#了解用例文件" title="Direct link to heading">#</a></h3><p>对于任意一个组件，在其目录下可以放置一个<code>__repl__/{file}.case.md</code>文件用来保存用例，比如这样的目录结构：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/src</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /components</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        /Loading</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            /__repl__</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                index.case.md</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            index.tsx</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>每一个用例文件是一个标准的markdown文件，支持<a href="https://github.github.com/gfm/" target="_blank" rel="noopener noreferrer">github flavored markdown</a>格式。</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>建议不要去手动创建这个文件，当你在界面上保存用例时，文件会自动按正确的格式创建。</p></div></div><p>在文件中，每一个二级标题（<code>## title</code>）对应一个用例名称，在这个二级标题下面的内容中，最后一个语言指定为<code>jsx</code>的代码块是这个用例对应的代码，其它内容则被视为用例的补充说明。参考这样一个文件：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly markdown"><pre tabindex="0" class="prism-code language-markdown codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token title important punctuation" style="color:rgb(199, 146, 234)">#</span><span class="token title important"> UnderConstruction reSKRipt Play Case</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token title important punctuation" style="color:rgb(199, 146, 234)">##</span><span class="token title important"> 内容包括标题</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token list punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> Create: 2021-07-05 10:39:56 (otakustay)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token list punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> Run: 2021-07-05 10:42:46 (otakustay)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">这个示例包含了头部，看一下头部标题左侧的色块是否能被半透明盖住。</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">\</span><span class="token code keyword" style="font-style:italic">`\`</span><span class="token plain">\`jsx</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export default function Repl() {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return (</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">UnderConstruction</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">style</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">{{width:</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">400,</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name namespace" style="color:rgb(178, 204, 214)">height:</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">200,</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name namespace" style="color:rgb(178, 204, 214)">border:</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">&#x27;1px</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">solid</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">#ccc&#x27;}}</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">I.HeadingRow</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">text</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">Page Title</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">UnderConstruction</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    );</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">\</span><span class="token code keyword" style="font-style:italic">`\`</span><span class="token plain">\`</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token title important punctuation" style="color:rgb(199, 146, 234)">##</span><span class="token title important"> 空内容</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token list punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> Create: 2021-07-05 10:39:56 (otakustay)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token list punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> Run: 2021-07-05 10:42:46 (otakustay)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">没有内容时的尺寸是否正确。理应看不到任何东西。</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">\</span><span class="token code keyword" style="font-style:italic">`\`</span><span class="token plain">\`jsx</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export default function Repl() {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">UnderConstruction</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain">;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">\</span><span class="token code keyword" style="font-style:italic">`\`</span><span class="token plain">\`</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>这个文件声明了2个用例，名字分别为“内容包括标题”和“空内容”，分别对应用例的创建和执行时间、一些简短的说明和一段代码。</p><p>你可以手动编辑这个markdown文件管理用例，也可以在调试现场来联动它。</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>在为用例编写描述时，必须在创建和执行时间<strong>后面</strong>追加内容，否则会导致用例文件的解析出现问题。</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="选择用例"></a>选择用例<a class="hash-link" href="#选择用例" title="Direct link to heading">#</a></h3><p>在<code>skr play</code>对应的界面中，你可以看到底部有一个“选择用例”的下拉框，通过点击它可以选择在markdown文件中存储的用例，选择一个用例后，左侧的代码就会变成对应的调试代码，你可以快速查看右侧预览效果，进行一些交互来确定新的代码是否对这一用例产生影响。</p><p><img src="/reskript/assets/images/play-case-select-3f58ae09a36cd86a449b1ffffe5f638c.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="保存用例"></a>保存用例<a class="hash-link" href="#保存用例" title="Direct link to heading">#</a></h3><p>当你在调试页面通过修改一些代码确定效果后，你可以把当前的代码保存为一个用例。点击下方的“保存为新用例”，<code>skr play</code>会自动为你在markdown用例文件中增加一部分内容，用例的名称默认为创建时间，你可以在markdown中修改名称并进一步补充说明。</p><video controls="" muted="" width="100%"><source src="/reskript/assets/medias/play-save-case-4809380fc7dff3c524fb4c30f5a7e8d7.mp4" type="video/mp4"></video><p>通过在现场保存用例，我们可以把具有典型性的调试代码留存下来，在后续代码修改后进行反复的验证。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="更新用例"></a>更新用例<a class="hash-link" href="#更新用例" title="Direct link to heading">#</a></h3><p>与保存用例类似，当你已经选中了一个用例并修改其代码之后，你可以选择通过“保存为新用例”按钮创建一个新的用例，也可以通过“更新当前用例”按钮修改当前用例的代码。</p><p>当点击“更新当前用例”时，markdown中对应的代码片段会被更新。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/reskript/docs/advanced/web-worker"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 使用Web Worker</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/reskript/docs/plugins/sass"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">支持SASS样式 »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#使用方法" class="table-of-contents__link">使用方法</a></li><li><a href="#调整组件" class="table-of-contents__link">调整组件</a></li><li><a href="#组件调试配置" class="table-of-contents__link">组件调试配置</a><ul><li><a href="#向调试环境提供额外依赖" class="table-of-contents__link">向调试环境提供额外依赖</a></li><li><a href="#自定义调试预览的布局" class="table-of-contents__link">自定义调试预览的布局</a></li></ul></li><li><a href="#管理调试用例" class="table-of-contents__link">管理调试用例</a><ul><li><a href="#了解用例文件" class="table-of-contents__link">了解用例文件</a></li><li><a href="#选择用例" class="table-of-contents__link">选择用例</a></li><li><a href="#保存用例" class="table-of-contents__link">保存用例</a></li><li><a href="#更新用例" class="table-of-contents__link">更新用例</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/reskript/assets/js/runtime~main.169b8fe5.js"></script>
<script src="/reskript/assets/js/main.15d86ffe.js"></script>
</body>
</html>